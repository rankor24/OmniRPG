import React from "react";

interface OmniAiLogoProps {
  className?: string;
  lines?: number;
  rotateSec?: number;
  isBreathing?: boolean;
}

const OmniAiLogo: React.FC<OmniAiLogoProps> = ({ className, lines = 5, rotateSec = 30, isBreathing = false }) => {
  // rotation step for paths
  const step = 360 / lines;

  // Initial d for paths (0% keyframe)
  const initialD = "M78.0,50.0 C79.2,52.3 81.4,56.2 81.0,58.2 C80.3,60.4 76.5,62.6 74.2,64.0 C71.8,65.5 69.0,64.8 67.0,67.0 C64.8,69.0 65.5,71.8 64.0,74.2 C62.6,76.5 60.4,80.3 58.2,81.0 C56.2,81.4 52.3,79.2 50.0,78.0 C47.5,76.6 46.6,73.8 43.8,73.1 C41.0,72.3 38.9,74.3 36.0,74.2 C33.4,74.2 28.9,74.2 27.4,72.6 C25.8,71.1 25.8,66.6 25.8,64.0 C25.7,61.1 27.7,59.0 26.9,56.2 C26.2,53.4 23.4,52.5 22.0,50.0 C20.8,47.7 18.6,43.8 19.0,41.8 C19.7,39.6 23.5,37.4 25.8,36.0 C28.2,34.5 31.0,35.2 33.0,33.0 C35.2,31.0 34.5,28.2 36.0,25.8 C37.4,23.5 39.6,19.7 41.8,19.0 C43.8,18.6 47.7,20.8 50.0,22.0 C52.5,23.4 53.4,26.2 56.2,26.9 C59.0,27.7 61.1,25.7 64.0,25.8 C66.6,25.8 71.1,25.8 72.6,27.4 C74.2,28.9 74.2,33.4 74.2,36.0 C74.3,38.9 72.3,41.0 73.1,43.8 C73.8,46.6 76.6,47.5 78.0,50.0 Z";

  return (
    <div className={`${className} ${isBreathing ? 'animate-breathing' : ''}`}>
      <style>{`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .rot { animation: spin ${rotateSec}s linear infinite; transform-origin: 50% 50%; }
        
        @keyframes wave {
          0%, 100% { d: path("M78.0,50.0 C79.2,52.3 81.4,56.2 81.0,58.2 C80.3,60.4 76.5,62.6 74.2,64.0 C71.8,65.5 69.0,64.8 67.0,67.0 C64.8,69.0 65.5,71.8 64.0,74.2 C62.6,76.5 60.4,80.3 58.2,81.0 C56.2,81.4 52.3,79.2 50.0,78.0 C47.5,76.6 46.6,73.8 43.8,73.1 C41.0,72.3 38.9,74.3 36.0,74.2 C33.4,74.2 28.9,74.2 27.4,72.6 C25.8,71.1 25.8,66.6 25.8,64.0 C25.7,61.1 27.7,59.0 26.9,56.2 C26.2,53.4 23.4,52.5 22.0,50.0 C20.8,47.7 18.6,43.8 19.0,41.8 C19.7,39.6 23.5,37.4 25.8,36.0 C28.2,34.5 31.0,35.2 33.0,33.0 C35.2,31.0 34.5,28.2 36.0,25.8 C37.4,23.5 39.6,19.7 41.8,19.0 C43.8,18.6 47.7,20.8 50.0,22.0 C52.5,23.4 53.4,26.2 56.2,26.9 C59.0,27.7 61.1,25.7 64.0,25.8 C66.6,25.8 71.1,25.8 72.6,27.4 C74.2,28.9 74.2,33.4 74.2,36.0 C74.3,38.9 72.3,41.0 73.1,43.8 C73.8,46.6 76.6,47.5 78.0,50.0 Z"); }
          25% { d: path("M79.9,50.0 C81.0,52.2 81.6,56.2 80.5,58.2 C79.2,60.1 74.7,61.4 72.6,63.0 C70.2,64.8 68.9,64.7 67.3,67.3 C65.8,69.6 66.4,73.7 65.0,75.9 C63.6,77.9 60.3,80.5 58.2,80.5 C55.8,80.4 52.5,77.1 50.0,76.1 C47.3,74.9 46.6,73.7 43.7,73.7 C40.9,73.4 37.6,76.1 35.0,75.9 C32.6,75.8 28.8,74.2 27.7,72.3 C26.6,70.2 27.7,65.7 27.4,63.0 C27.1,60.1 27.8,59.0 26.3,56.3 C25.1,53.8 21.3,52.3 20.1,50.0 C19.0,47.8 18.4,43.8 19.5,41.8 C20.8,39.9 25.3,38.6 27.4,37.0 C29.8,35.2 31.1,35.3 32.7,32.7 C34.2,30.4 33.6,26.3 35.0,24.1 C36.4,22.1 39.7,19.5 41.8,19.5 C44.2,19.6 47.5,22.9 50.0,23.9 C52.7,25.1 53.4,26.3 56.3,26.3 C59.1,26.6 62.4,23.9 65.0,24.1 C67.4,24.2 71.2,25.8 72.3,27.7 C73.4,29.8 72.3,34.3 72.6,37.0 C72.9,39.9 72.2,41.0 73.7,43.7 C74.9,46.2 78.7,47.7 79.9,50.0 Z"); }
          50% { d: path("M81.4,50.0 C82.1,52.2 80.7,55.9 79.1,57.8 C77.4,59.8 73.2,60.2 71.3,62.3 C69.2,64.4 69.4,65.5 68.2,68.2 C67.2,70.8 67.3,75.4 65.7,77.2 C64.2,78.8 60.2,79.6 57.8,79.1 C55.2,78.6 52.6,75.3 50.0,74.6 C47.1,73.8 46.3,74.6 43.3,75.0 C40.6,75.3 36.6,77.7 34.3,77.2 C32.2,76.6 29.5,73.6 28.6,71.4 C27.8,68.9 29.5,65.0 28.7,62.3 C27.9,59.4 26.9,59.0 25.0,56.7 C23.4,54.5 19.4,52.2 18.6,50.0 C17.9,47.8 19.3,44.1 20.9,42.2 C22.6,40.2 26.8,39.8 28.7,37.7 C30.8,35.6 30.6,34.5 31.8,31.8 C32.8,29.2 32.7,24.6 34.3,22.8 C35.8,21.2 39.8,20.4 42.2,20.9 C44.8,21.4 47.4,24.7 50.0,25.4 C52.9,26.2 53.7,25.4 56.7,25.0 C59.4,24.7 63.4,22.3 65.7,22.8 C67.8,23.4 70.5,26.4 71.4,28.6 C72.2,31.1 70.5,35.0 71.3,37.7 C72.1,40.6 73.1,41.0 75.0,43.3 C76.6,45.5 80.6,47.8 81.4,50.0 Z"); }
          75% { d: path("M82.0,50.0 C82.1,52.2 79.1,55.4 77.4,57.3 C75.4,59.4 72.2,59.5 70.8,62.0 C69.2,64.4 70.5,66.8 69.6,69.6 C68.8,72.2 67.8,76.5 66.0,77.7 C64.2,78.9 59.8,77.9 57.3,77.4 C54.6,76.7 52.9,74.0 50.0,74.0 C47.1,73.8 45.7,76.2 42.8,76.7 C40.2,77.4 35.9,78.7 34.0,77.7 C32.2,76.6 30.7,72.5 30.0,70.0 C29.2,67.3 30.6,64.5 29.2,62.0 C27.9,59.4 25.2,59.4 23.3,57.2 C21.4,55.3 18.2,52.2 18.0,50.0 C17.9,47.8 20.9,44.6 22.6,42.7 C24.6,40.6 27.8,40.5 29.2,38.0 C30.8,35.6 29.5,33.2 30.4,30.4 C31.2,27.8 32.2,23.5 34.0,22.3 C35.8,21.1 40.2,22.1 42.7,22.6 C45.4,23.3 47.1,26.0 50.0,26.0 C52.9,26.2 54.3,23.8 57.2,23.3 C59.8,22.6 64.1,21.3 66.0,22.3 C67.8,23.4 69.3,27.5 70.0,30.0 C70.8,32.7 69.4,35.5 70.8,38.0 C72.1,40.6 74.8,40.6 76.7,42.8 C78.6,44.7 81.8,47.8 82.0,50.0 Z"); }
        }
        
        .omni-path { animation: wave 4s ease-in-out infinite; }
      `}</style>

      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          {/* Soft border glow */}
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="1.5" result="b" />
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>

          {/* Palette (cyan→blue→purple→pink only) */}
          <linearGradient id="g-cyan" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#67e8f9"/><stop offset="100%" stopColor="#06b6d4"/>
          </linearGradient>
          <linearGradient id="g-blue" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#93c5fd"/><stop offset="100%" stopColor="#2563eb"/>
          </linearGradient>
          <linearGradient id="g-purple" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#c4b5fd"/><stop offset="100%" stopColor="#7c3aed"/>
          </linearGradient>
          <linearGradient id="g-pink" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#f9a8d4"/><stop offset="100%" stopColor="#db2777"/>
          </linearGradient>
        </defs>

        {/* Visible outer border (light gradient + glow) */}
        <circle cx="50" cy="50" r="48" fill="none"
                stroke="url(#g-purple)" strokeWidth="3" filter="url(#glow)" opacity="0.95"/>
        {/* Hairline for crispness */}
        <circle cx="50" cy="50" r="46" fill="none" stroke="rgba(255,255,255,0.18)" strokeWidth="0.5"/>

        {/* Content */}
        <g className={!isBreathing ? "rot" : ""}>
          <circle cx="50" cy="50" r="45" fill="#0a0a0a" />
          {/* Generate waves with rotation, variety */}
          {Array.from({ length: lines }).map((_, i) => {
            const rot = i * step;
            const gradId = ["g-cyan", "g-blue", "g-purple", "g-pink"][i % 4];
            const w = 1.05 - (i % 4) * 0.2;
            const op = 0.9 - (i % 4) * 0.08;
            const delay = -i * 0.9;  // stagger animation start
            return (
              <path
                key={i}
                className="omni-path"
                d={initialD}
                transform={`rotate(${rot} 50 50)`}
                fill="none"
                strokeLinecap="round"
                strokeLinejoin="round"
                vectorEffect="non-scaling-stroke"
                style={{ stroke: `url(#${gradId})`, opacity: op, animationDelay: `${delay}s` }}
              >
                <animate
                  attributeName="stroke-width"
                  values={`${w};${w + 0.12};${w}`}
                  dur="3.6s"
                  repeatCount="indefinite"
                />
              </path>
            );
          })}
        </g>
      </svg>
    </div>
  );
};

export default OmniAiLogo;